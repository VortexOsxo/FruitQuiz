<app-default-page-template>
    <div class="leaderboard-container">
        <h1 class="fruitz-title">{{ 'LeaderboardPage.Leaderboard' | translate }}</h1>

        <div class="main-card mat-elevation-z4">
            <div class="card-header"></div>
            <div class="card-content">
                <div class="table-container fruitz-scroll">
                    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z0">
                        <!-- Rank Column (Not Sortable) -->
                        <ng-container matColumnDef="rank">
                            <th mat-header-cell *matHeaderCellDef class="text-center"> {{ 'LeaderboardPage.Rank' | translate }} </th>
                            <td mat-cell *matCellDef="let user; let i = index" class="text-center"> {{i + 1}} </td>
                        </ng-container>

                        <!-- Username Column (Not Sortable) -->
                        <ng-container matColumnDef="username">
                            <th mat-header-cell *matHeaderCellDef class="text-center"> {{ 'LeaderboardPage.User' | translate }} </th>
                            <td mat-cell *matCellDef="let user" class="username-column">
                                <div class="user-info">
                                    <app-profile-avatar-icon [user]="user" [size]="'30px'" />
                                    <span>{{user.username}}</span>
                                </div>
                            </td>
                        </ng-container>

                        <!-- Games Won Column -->
                        <ng-container matColumnDef="totalGameWon">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> {{ 'LeaderboardPage.GamesWon' |
                                translate }} </th>
                            <td mat-cell *matCellDef="let user" class="text-center"> {{user.totalGameWon}} </td>
                        </ng-container>

                        <!-- Total Points Column -->
                        <ng-container matColumnDef="totalPoints">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> {{ 'LeaderboardPage.Points' |
                                translate }} </th>
                            <td mat-cell *matCellDef="let user" class="text-center"> {{user.totalPoints | number}} </td>
                        </ng-container>

                        <!-- Survived Questions Column -->
                        <ng-container matColumnDef="totalSurvivedQuestion">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> {{ 'LeaderboardPage.Questions' |
                                translate }} </th>
                            <td mat-cell *matCellDef="let user" class="text-center"> {{user.totalSurvivedQuestion}} </td>
                        </ng-container>

                        <!-- Game Time Column -->
                        <ng-container matColumnDef="totalGameTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> {{ 'LeaderboardPage.GameTime' |
                                translate }} </th>
                            <td mat-cell *matCellDef="let user" class="text-center"> {{formatGameTime(user.totalGameTime)}} </td>
                        </ng-container>

                        <!-- Current Win Streak Column -->
                        <ng-container matColumnDef="currentWinStreak">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> {{ 'LeaderboardPage.CurrentStreak' |
                                translate }} </th>
                            <td mat-cell *matCellDef="let user" class="text-center"> {{user.currentWinStreak}} </td>
                        </ng-container>

                        <!-- Best Win Streak Column -->
                        <ng-container matColumnDef="bestWinStreak">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> {{ 'LeaderboardPage.BestStreak' |
                                translate }} </th>
                            <td mat-cell *matCellDef="let user" class="text-center"> {{user.bestWinStreak}} </td>
                        </ng-container>

                        <!-- Coins Spent Column -->
                        <ng-container matColumnDef="coinSpent">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> {{ 'LeaderboardPage.CoinsSpent' |
                                translate }} </th>
                            <td mat-cell *matCellDef="let user" class="text-center"> {{user.coinSpent}} </td>
                        </ng-container>

                        <!-- Coins Gained Column -->
                        <ng-container matColumnDef="coinGained">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> {{ 'LeaderboardPage.CoinsGained' |
                                translate }} </th>
                            <td mat-cell *matCellDef="let user" class="text-center"> {{user.coinGained}} </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>
                </div>
            </div>
            <div class="card-footer"></div>
        </div>
    </div>
</app-default-page-template>